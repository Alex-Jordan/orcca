<?xml version="1.0" encoding="UTF-8" ?>

<!-- *********************************************************************-->
<!-- Copyright 2016-2017                                                  -->
<!-- Portland Community College                                           -->
<!--                                                                      -->
<!-- Authors                                                              -->
<!-- Ann Cary, Alex Jordan, Scot Leavitt, Cara Lee, Carl Yao, Ralf Youtz  -->
<!--                                                                      -->
<!-- This file is part of Open Resources for Community College Algebra    -->
<!-- (ORCCA).                                                             -->
<!--                                                                      -->
<!-- Creative Commons BY 4.0 license                                      -->
<!-- https://creativecommons.org/licenses/by/4.0/                         -->
<!-- *********************************************************************-->

<section xml:id="section-introduction-to-rational-functions">

    <title>Introduction to Rational Functions</title>

    <introduction>
        <p>In this chapter, we will learn rational functions, which looks like <m>f(x)=\frac{P(x)}{Q(x)}</m>. We can see rational functions are needed when division is involved. In this lesson, we will look at a rational function's domain, range and graph.</p>

        <figure>
            <caption>Alternative Video Lesson</caption>
            <video youtube="2rSd1aoHK3k" />
            <video youtube="v0IhvIzCc_I" />
        </figure>
    </introduction>

    <subsection>
        <title>Graph of Rational Functions</title>

        <p>When a drug is injected into a patient, the drug's concentration in the patient's bloodstream can be modeled by the function <me>C(t)=\frac{3t}{t^2+8}</me>where <m>C</m> stands for the drug's concentration in milligrams per liter, and <m>t</m> stands for the number of hours since the injection. A new injection is needed when the concentration falls to <m>\frac{1}{3}</m> milligrams per liter. After how many hours since the first inject should the next injection be given?</p>

        <p>The function <m>C(t)=\frac{3t}{t^2+8}</m> is a rational function. Let's look at its formal definition:</p>

        <definition xml:id="definition-rational-function">
            <statement>
                <p>A <term>rational function</term> <m>f(x)</m> is in the form of <me>f(x)=\frac{P(x)}{Q(x)}</me>where <m>P(x)</m> and <m>Q(x)</m> are polynomials, but <m>Q(x)</m> is not the constant zero function.</p>
            </statement>
        </definition>

        <p>Let's look at the graph of <m>C(t)=\frac{3t}{t^2+8}</m>:</p>

        <figure>
            <caption>Graph of <m>C(t)=\frac{3t}{t^2+8}</m></caption>
            <image width="50%">
                <description></description>
                <latex-image-code>
                <![CDATA[\begin{tikzpicture}
                    \begin{axis}[ymin=-1/3,ymax=1,xmin=-1,xmax=10,
                                minor ytick={-0.3333,0,...,1},
                                xtick={0,1,...,9},
                                minor xtick={0,1,...,9},
                                xlabel={time in hours},ylabel={concentration (milligrams per liter)}]
                        \addplot+[domain=-1:10] {3*x/(x^2+8)};
                        \node at (axis cs: 0,1/3) [left] {$\frac{1}{3}$};
                        \node at (axis cs: 0,2/3) [left] {$\frac{2}{3}$};
                        \node at (axis cs: 5,2/3) [red] {$C(t)=\frac{3t}{t^2+8}$};
                    \end{axis}
                \end{tikzpicture}
                ]]>
                </latex-image-code>
            </image>
        </figure>

        <p>We can see this rational function's graph is a smooth curve. In this context, only positive values make sense, so we focus on the first quadrant. Since the drug is injected, its concentration in the bloodstream increases, and starts to decrease at about <m>3</m> hours. We need to find out when the concentration will become <m>\frac{1}{3}</m> milligrams per liter, so we substitute <m>C(t)</m> in the function with <m>\frac{1}{3}</m> and solve for <m>t</m>:<md>
            <mrow>C(t)\amp=\frac{3t}{t^2+8}</mrow>
            <mrow>\frac{1}{3}\amp=\frac{3t}{t^2+8}</mrow>
            <mrow>1(t^2+8)\amp=3(3t)\amp\text{cross multiply}</mrow>
            <mrow>t^2+8\amp=9t</mrow>
            <mrow>t^2-9t+8\amp=0</mrow>
            <mrow>(t-1)(t-8)\amp=0</mrow>
            <mrow>t-1\amp=0\text{ or }t-8=0</mrow>
            <mrow>t\amp=1\text{ or }t=8</mrow>
        </md>The concentration will be <m>\frac{1}{3}</m> milligrams per liter at <m>1</m> hour since the injection, and then at <m>8</m> hours again. We can verify those two solutions by <m>(1,\frac{1}{3})</m> and <m>(8,\frac{1}{3})</m> on the curve.</p>

        <p>The patient should receive a second injection <m>8</m> hours since the first injection.</p>

        <p>Next, let's study the long-term behavior of <m>C(t)</m> with a calculator.</p>
        <todo>add in a calculator activity to find horizontal asymptote of C(t)</todo>

        <p>A rational function's graph is not always smooth. It could have breaks. Let's look at another example.</p>

        <example xml:id="example-boat-river-rational-function">
            <statement>
                <p>Two towns are connected by a <m>12</m>-mile-long river, which flows from Town A to Town B at the velocity of <m>2</m> miles per hour. A boat will travel at a constant velocity, <m>v</m> miles per hour, from Town A to Town B, and then back to Town A. Due to the river's flow, the boat's actual speed is <m>v+2</m> miles per hour from Town A to Town B, and <m>v-2</m> miles per hour from Town B back to Town A. If the boat driver plans to spend <m>8</m> hours for the whole trip, how fast should he/she drive the boat?</p>

                <p>We need to review 3 formulas for constant-rate movement:<md>
                    <mrow>d\amp=vt</mrow>
                    <mrow>v\amp=\frac{d}{t}</mrow>
                    <mrow>t\amp=\frac{d}{v}</mrow>
                </md>where <m>d</m> stands for distance, <m>v</m> stands for velocity, and <m>t</m> stands for time. According to the third formula, the time it takes the boat to travel from Town A to Town B is <m>\frac{12}{v+2}</m>, and <m>\frac{12}{v-2}</m> from Town B to Town A. The function to model the whole trip's time is<me>t(v)=\frac{12}{v-2}+\frac{12}{v+2}</me>where <m>t</m> stands for time in hours. Let's look at the graph of this function:</p>

                <figure>
                    <caption>Graph of <m>t(v)=\frac{12}{v-2}+\frac{12}{v+2}</m></caption>
                    <image width="50%">
                        <description></description>
                        <latex-image-code>
                        <![CDATA[\begin{tikzpicture}
                            \begin{axis}[ymin=-10,ymax=10,xmin=-10,xmax=10,
                                        ytick={-8,-6,...,8},
                                        minor ytick={-8,-6,...,8},
                                        xtick={-8,-6,...,8},
                                        minor xtick={-8,-6,...,8},
                                        xlabel={velocity},ylabel={time}]
                                \addplot [<->, domain=-10:-3.532, color=red] {12/(x-2)+12/(x+2)};
                                \addplot [<->, domain=-1.132:1.132, color=red] {12/(x-2)+12/(x+2)};
                                \addplot [<->, domain=3.532:10, color=red] {12/(x-2)+12/(x+2)};
                                \draw [<->, dashed, blue, thick] (axis cs: -2,-10) -- (axis cs: -2,10);
                                \draw [<->, dashed, blue, thick] (axis cs: 2,-10) -- (axis cs: 2,10);
                                \addplot [soliddot, color=black, right] coordinates {(4, 8)} node{$(4,8)$};
                            \end{axis}
                        \end{tikzpicture}
                        ]]>
                        </latex-image-code>
                    </image>
                </figure>

                <p>The function passes <m>(4,8)</m>. This implies if the boat drives at <m>4</m> miles per hour, it would take <m>8</m> hours to complete the trip. From Town A to Town B, it would take <m>\frac{12}{v+2}=\frac{12}{4+2}=2</m> hours; and from Town B to Town A, it would take <m>\frac{12}{v-2}=\frac{12}{4-2}=6</m> hours. In a later section, we will learn how to solve this equation algebraically.</p>
            </statement>
        </example>

        <p>In the example, the curve is still smooth, but there are two breaks at <m>x=-2</m> and <m>x=2</m>. Those two vertical lines are called <term>asymptotes</term>. A function's graph approaches an asymptote infinitely close, but never touches it.</p>

        <p>In math, we use <m>\infty</m> to represent infinity. In the graph, the function's value approaches <m>\infty</m> as its <m>x</m> value approaches <m>2</m> from the right side, and approaches <m>-\infty</m> as its <m>x</m> value approaches <m>2</m> from the left side. Let's investigate why this is happening.</p>

        <p>We will build a table of values for <m>t(v)</m>:</p>

        <table>
            <caption>Values of <m>t(v)=\frac{12}{v-2}+\frac{12}{v+2}</m></caption>
            <tabular>
                <col halign="center"/>
                <col halign="center"/>
                <col halign="center"/>
                <row bottom="medium">
                    <cell><m>v</m></cell>
                    <cell><m>t(v)</m></cell>
                    <cell>interpretation</cell>
                </row>
                <row>
                    <cell><m>2.1</m></cell>
                    <cell><m>122.92</m></cell>
                    <cell><line>If the boat drives at <m>2.1</m> miles per hour,</line><line>the trip would take approximately <m>122.93</m> hours.</line></cell>
                </row>
                <row>
                    <cell><m>2.01</m></cell>
                    <cell><m>1202.99</m></cell>
                    <cell><line>If the boat drives at <m>2.01</m> miles per hour,</line><line>the trip would take approximately <m>1202.99</m> hours.</line></cell>
                </row>
            </tabular>
        </table>

        <p>To understand the interpretations, we need to find a pattern of division:<md>
            <mrow>\frac{1}{0.1}\amp=10</mrow>
            <mrow>\frac{1}{0.01}\amp=100</mrow>
            <mrow>\frac{1}{0.001}\amp=1000</mrow>
            <mrow>\amp\ldots</mrow>
            <mrow>\frac{1}{\text{infinitely small}}\amp=\infty</mrow>
        </md>When the boat drives from Town B back to Town A at <m>2.1</m> miles per hour, the river's current would decrease the actual velocity to <m>0.1</m> mile per hour. It would take the boat <m>\frac{12}{0.1}=120</m> hours to complete the travel from Town B back to Town A.</p>

        <p>Similarly, as the boat drives from Town B to Town A at a velocity closer and closer to <m>2</m>, the division <m>\frac{12}{v-2}</m> would produce a larger and larger value, approaching <m>\infty</m>. When we graph the function, we would plot <m>(2.1,122.93), (2.01,1202.99), (2.001,12003), \ldots</m>. This is why we see a vertical asymptote at <m>x=2</m>.</p>

        <remark><p>The rational function <m>f(x)=\frac{1}{x-a}</m> has a vertical asymptote at <m>x=a</m>, as this value makes the denominator <m>0</m>.</p></remark>

        <p>Now we understand why <m>t(v)=\frac{12}{v-2}+\frac{12}{v+2}</m> has two vertical asymptotes at <m>x=-2</m> and <m>x=2</m>. The domain of <m>t(v)</m> is <m>(-\infty,-2)\cup(-2,2)\cup(2,\infty)</m> in interval notation, and <lbrace /><m>x \mid x\ne-2, x\ne2</m><rbrace /> in set notation.</p>

        <todo>add a calculator activity to find the function's hoirzontal asymptote.</todo>

        <p>Let's look at some examples of rational functions.</p>

        <example>
            <statement>
                <p>Build a table and sketch the graph of the function <m>f(x)=\frac{1}{x}</m>. Find the function's domain and range.</p>

                <p>Since <m>x=0</m> makes the denominator <m>0</m>, the function has a vertical asymptote at <m>x=0</m>. This implies, as <m>x</m>-values approaches to <m>0</m>, the function's values approaches <m>\infty</m> or <m>-\infty</m>. We will choose <m>x</m> values properly and build a table:</p>

                <table>
                    <caption>Values of <m>f(x)=\frac{1}{x}</m></caption>
                    <tabular>
                        <col halign="center"/>
                        <col halign="left"/>
                        <col halign="left"/>
                        <row bottom="medium">
                            <cell><m>x</m></cell>
                            <cell><m>f(x)</m></cell>
                            <cell>Points on the Curve</cell>
                        </row>
                        <row>
                            <cell><m>-10</m></cell>
                            <cell><m>\frac{1}{-10}=-0.1</m></cell>
                            <cell><m>(-10,-0.1)</m></cell>
                        </row>
                        <row>
                            <cell><m>-2</m></cell>
                            <cell><m>\frac{1}{-2}=-0.5</m></cell>
                            <cell><m>(-2,-0.5)</m></cell>
                        </row>
                        <row>
                            <cell><m>-1</m></cell>
                            <cell><m>\frac{1}{-1}=-1</m></cell>
                            <cell><m>(-1,-1)</m></cell>
                        </row>
                        <row>
                            <cell><m>-0.5</m></cell>
                            <cell><m>\frac{1}{-0.5}=-2</m></cell>
                            <cell><m>(-0.5,-2)</m></cell>
                        </row>
                        <row>
                            <cell><m>-0.1</m></cell>
                            <cell><m>\frac{1}{-0.1}=-10</m></cell>
                            <cell><m>(-0.1,-10)</m></cell>
                        </row>
                        <row>
                            <cell><m>0.1</m></cell>
                            <cell><m>\frac{1}{0.1}=10</m></cell>
                            <cell><m>(0.1,10)</m></cell>
                        </row>
                        <row>
                            <cell><m>0.5</m></cell>
                            <cell><m>\frac{1}{0.5}=2</m></cell>
                            <cell><m>(0.5,2)</m></cell>
                        </row>
                        <row>
                            <cell><m>1</m></cell>
                            <cell><m>\frac{1}{1}=1</m></cell>
                            <cell><m>(1,1)</m></cell>
                        </row>
                        <row>
                            <cell><m>2</m></cell>
                            <cell><m>\frac{1}{2}=0.5</m></cell>
                            <cell><m>(2,0.5)</m></cell>
                        </row>
                        <row>
                            <cell><m>10</m></cell>
                            <cell><m>\frac{1}{10}=0.1</m></cell>
                            <cell><m>(10,0.1)</m></cell>
                        </row>
                    </tabular>
                </table>

                <p>Next, we will plot those points and then connect them:</p>

                <figure>
                    <caption>Graph of <m>f(x)=\frac{1}{x}</m></caption>
                    <image width="50%">
                        <description></description>
                        <latex-image-code>
                        <![CDATA[\begin{tikzpicture}
                            \begin{axis}[ymin=-11,ymax=11,xmin=-11,xmax=11,
                                        ytick={-10,-8,...,10},
                                        minor ytick={-10,-8,...,10},
                                        xtick={-10,-8,...,10},
                                        minor xtick={-10,-8,...,10},
                                        xlabel={x},ylabel={f}]
                                \addplot [red, <->, domain=-11:-1/11] {1/x};
                                \addplot [red, <->, domain=1/11:11] {1/x};
                                \addplot [soliddot, color=red] coordinates {(-10,-0.1) (-2,-1/2) (-1,-1) (-0.5,-2) (-0.1,-10) (0.1,10) (0.5,2) (1,1) (2,1/2) (10,0.1)};
                                \draw [<->, dashed, blue, thick] (axis cs: 0,-11) -- (axis cs: 0,11);
                            \end{axis}
                        \end{tikzpicture}
                        ]]>
                        </latex-image-code>
                    </image>
                </figure>

                <p>The function <m>f(x)=\frac{1}{x}</m> has a vertical asymptote at <m>x=0</m>. As a result, its domain is <m>(-\infty,0)\cup(0,\infty)</m> in interval notation, or <lbrace /><m>x \mid x\ne0</m><rbrace /> in set notation.</p>

                <p>By the graph, the function's value cannot be <m>0</m>, so its range is also <m>(-\infty,0)\cup(0,\infty)</m>. In other words, the function <m>f(x)</m> has a horizontal asymptote at <m>y=0</m>.</p>
            </statement>
        </example>

        <example>
            <statement>
                <p>Use technology to build a table and graph the function <m>f(x)=\frac{1}{x^2}</m>. Find the function's domain and range.</p>
            </statement>
            <solution>
                <p>With technology, we will choose the starting value of <m>-2</m> and an increment of <m>0.5</m>, and look at values in a table:</p>

                <table>
                    <caption>Values of <m>f(x)=\frac{1}{x^2}</m> in a table</caption>
                    <tabular>
                        <col halign="center"/>
                        <col halign="left"/>
                        <row bottom="medium">
                            <cell><m>x</m></cell>
                            <cell><m>f(x)</m></cell>
                        </row>
                        <row>
                            <cell><m>-2</m></cell>
                            <cell><m>0.25</m></cell>
                        </row>
                        <row>
                            <cell><m>-1.5</m></cell>
                            <cell><m>0.444\ldots</m></cell>
                        </row>
                        <row>
                            <cell><m>-1</m></cell>
                            <cell><m>1</m></cell>
                        </row>
                        <row>
                            <cell><m>-0.5</m></cell>
                            <cell><m>4</m></cell>
                        </row>
                        <row>
                            <cell><m>0</m></cell>
                            <cell><m></m></cell>
                        </row>
                        <row>
                            <cell><m>0.5</m></cell>
                            <cell><m>4</m></cell>
                        </row>
                        <row>
                            <cell><m>1</m></cell>
                            <cell><m>1</m></cell>
                        </row>
                        <row>
                            <cell><m>1.5</m></cell>
                            <cell><m>0.444\ldots</m></cell>
                        </row>
                        <row>
                            <cell><m>2</m></cell>
                            <cell><m>0.25</m></cell>
                        </row>
                    </tabular>
                </table>

                <p>Next, we will use technology to graph the function:</p>

                <figure>
                    <caption>Graph of <m>f(x)=\frac{1}{x^2}</m></caption>
                    <image width="50%">
                        <description></description>
                        <latex-image-code>
                        <![CDATA[\begin{tikzpicture}
                            \begin{axis}[ymin=-1,ymax=5,xmin=-6,xmax=6,
                                        ytick={-1,0,...,4},
                                        minor ytick={-10,-8,...,3},
                                        xtick={-5,-4,...,5},
                                        minor xtick={-5,-4,...,5},
                                        xlabel={x},ylabel={f}]
                                \addplot [red, <->, domain=-6:-sqrt(1/5), samples=100] {1/x^2};
                                \addplot [red, <->, domain=sqrt(1/5):6, samples=100] {1/x^2};
                            \end{axis}
                        \end{tikzpicture}
                        ]]>
                        </latex-image-code>
                    </image>
                </figure>

                <p>The function <m>f(x)=\frac{1}{x^2}</m> has a vertical asymptote at <m>x=0</m>. As a result, its domain is <m>(-\infty,0)\cup(0,\infty)</m> in interval notation, or <lbrace /><m>x \mid x\ne0</m><rbrace /> in set notation.</p>

                <p>By the graph, the function's range is also <m>(0,\infty)</m>. The function <m>f(x)</m> has a horizontal asymptote at <m>y=0</m>.</p>
            </solution>
        </example>

        <remark><p>It is important to be able to quickly sketch the graphs of the following types of basic functions:<md>
            <mrow>f(x)\amp=mx+b</mrow>
            <mrow>g(x)\amp=a(x-h)^2+k</mrow>
            <mrow>h(x)\amp=\abs{x}</mrow>
            <mrow>p(x)\amp=\frac{1}{x}</mrow>
            <mrow>q(x)\amp=\frac{1}{x^2}</mrow>
        </md></p></remark>

        <example>
            <statement>
                <p>Find the domain and vertical asymptote(s) of <m>g(x)=\frac{4x^2}{x^2-2x-24}</m>. Use technology to find any horizontal asymptote(s).</p>
            </statement>
            <solution>
                <p>To find a rational function's domain, we set the denominator to be <m>0</m>, and solve for the variable:<md>
                    <mrow>x^2-2x-24\amp=0</mrow>
                    <mrow>(x-6)(x+4)\amp=0</mrow>
                    <mrow>x-6\amp=0\text{ or }x+4=0</mrow>
                    <mrow>x\amp=6\text{ or }x=-4</mrow>
                </md>Since <m>x=6</m> and <m>x=-4</m> will cause the denominator to be <m>0</m>, we eliminate them from the domain. The function's domain is <lbrace /><m>x \mid x\ne6, x\ne-4</m><rbrace />. The function has two vertical asymptotes at <m>x=6</m> and <m>x=-4</m>.</p>

                <p>With a graping device, we can verity the vertical asymptotes:</p>

                <figure>
                    <caption>Graph of <m>g(x)=\frac{4x^2}{x^2-2x-24}</m></caption>
                    <image width="50%">
                        <description></description>
                        <latex-image-code>
                        <![CDATA[\begin{tikzpicture}
                            \begin{axis}[ymin=-10,ymax=20,xmin=-20,xmax=20,
                                        ytick={-8,-4,...,16},
                                        minor ytick={-8,-4,...,16},
                                        xtick={-16,-12,...,16},
                                        minor xtick={-16,-12,...,16},
                                        xlabel={x},ylabel={g}]
                                \addplot [red, <->, domain=-20:-4.368, sample=150] {4*x*x/(x*x-2*x-24)};
                                \addplot [red, <->, domain=-3.487:4.916, sample=150] {4*x*x/(x*x-2*x-24)};
                                \addplot [red, <->, domain=6.868:20, sample=150] {4*x*x/(x*x-2*x-24)};
                            \end{axis}
                        \end{tikzpicture}
                        ]]>
                        </latex-image-code>
                    </image>
                </figure>

                <p>It's easy to verify the vertical asymptotes, <m>x=-4</m> and <m>x=6</m>, by the graph. However, it's difficult to see any horizontal asymptote. An educated guess is <m>y=4</m>, but we should verify this by looking at a table of values. Set both the start value and increment to be some big numbers, and we will see something like the following data:</p>

                <sidebyside widths="47% 47%" margins="0%">
                    <table>
                        <tabular>
                            <col halign="center"/>
                            <col halign="left"/>
                            <row bottom="medium">
                                <cell><m>x</m></cell>
                                <cell><m>g(x)</m></cell>
                            </row>
                            <row>
                                <cell><m>1000</m></cell>
                                <cell><m>4.008\ldots</m></cell>
                            </row>
                            <row>
                                <cell><m>2000</m></cell>
                                <cell><m>4.004\ldots</m></cell>
                            </row>
                            <row>
                                <cell><m>3000</m></cell>
                                <cell><m>4.002\ldots</m></cell>
                            </row>
                            <row>
                                <cell><m>4000</m></cell>
                                <cell><m>4.002\ldots</m></cell>
                            </row>
                        </tabular>
                    </table>

                    <table>
                        <tabular>
                            <col halign="center"/>
                            <col halign="left"/>
                            <row bottom="medium">
                                <cell><m>x</m></cell>
                                <cell><m>g(x)</m></cell>
                            </row>
                            <row>
                                <cell><m>-1000</m></cell>
                                <cell><m>3.992\ldots</m></cell>
                            </row>
                            <row>
                                <cell><m>-2000</m></cell>
                                <cell><m>3.996\ldots</m></cell>
                            </row>
                            <row>
                                <cell><m>-3000</m></cell>
                                <cell><m>3.997\ldots</m></cell>
                            </row>
                            <row>
                                <cell><m>-4000</m></cell>
                                <cell><m>3.998\ldots</m></cell>
                            </row>
                        </tabular>
                    </table>
                </sidebyside>

                <p>Values in the tables have verified that the horizontal asymptote is indeed <m>y=4</m>.</p>
            </solution>
        </example>

        <p>Let's look at another example where a rational functions is used to model real life data.</p>

        <example>
            <statement>
                <p>The monthly operation cost of a shoe company is approximately <m>\$300,000.00</m>. The cost of producing each pair of shoes is <m>\$30.00</m>. As a result, the cost of producing <m>x</m> pairs of shoes is <m>30x+300000</m> dollars, and the average cost of producing each pair of shoes can be modeled by the function<me>\bar{C}(x)=\frac{30x+300000}{x}</me></p>

                <p>Answer the following questions with technology.<ol>
                    <li><p>What's the average cost of producing <m>100</m> pairs of shoes? <m>1,000</m> pairs? <m>10,000</m> pairs? What's the pattern?</p></li>
                    <li><p>To make the average cost of producing each pair of shoes cheaper than <m>\$50.00</m>, at least how many pairs of shoes must the company produce?</p></li>
                    <li><p>Assume the company's shoes are very popular. What's the average cost of producing infinitely many pairs of shoes?</p></li>
                </ol></p>
            </statement>
            <solution>
                <p>We will graph the function with technology. After adjusting window settings, we have:</p>

                <figure>
                    <caption>Graph of <m>\bar{C}(x)=\frac{30x+300000}{x}</m></caption>
                    <image width="50%">
                        <description></description>
                        <latex-image-code>
                        <![CDATA[\begin{tikzpicture}
                            \begin{axis}[ymin=-2000,ymax=2000,xmin=-2000,xmax=2000,
                                        ytick={-1000,1000},
                                        minor ytick={-1000,1000},
                                        xtick={-1000,1000},
                                        minor xtick={-1000,1000},
                                        xlabel={pairs of shoes},ylabel={average cost}]
                                \addplot [red, <->, domain=-2000:-147.783, sample=150] {(30*x+300000)/x};
                                \addplot [red, <->, domain=153:2000, sample=150] {(30*x+300000)/x};
                            \end{axis}
                        \end{tikzpicture}
                        ]]>
                        </latex-image-code>
                    </image>
                </figure>

                <p>1. What's the average cost of producing <m>100</m> pairs of shoes? <m>1,000</m> pairs? <m>10,000</m> pairs? What's the pattern?</p>

                <p>To answer this question, we locate the points where <m>x</m> values are <m>100</m>, <m>1,000</m> and <m>10,000</m>. They are <m>(100,3030), (1000,330)</m> and <m>(10000,60)</m>. They imply:<ul>
                        <li><p>If the company produces <m>100</m> pairs of shoes, the average cost of producing one pair is <m>\$3,030.00</m>.</p></li>
                        <li><p>If the company produces <m>1,000</m> pairs of shoes, the average cost of producing one pair is <m>\$330.00</m>.</p></li>
                        <li><p>If the company produces <m>10,000</m> pairs of shoes, the average cost of producing one pair is <m>\$60.00</m>.</p></li>
                    </ul>We can see the more shoes the company produces, the lower the average cost.
                </p>

                <p>2. To make the average cost of producing each pair of shoes cheaper than <m>\$50.00</m>, at least how many pairs of shoes must the company produce?</p>

                <p>To answer this question, we lcoate the point where its <m>y</m>-value is <m>50</m>. With technology, we graph both the function <m>\bar{C}(x)</m> and <m>y=50</m>, and locate their intersection.</p>

                <figure>
                    <caption>Intersection of <m>\bar{C}(x)=\frac{30x+300000}{x}</m> and <m>y=50</m></caption>
                    <image width="50%">
                        <description></description>
                        <latex-image-code>
                        <![CDATA[\begin{tikzpicture}
                            \begin{axis}[ymin=-50,ymax=100,xmin=-1000,xmax=20000,
                                        ytick={},
                                        minor ytick={},
                                        xtick={},
                                        minor xtick={},
                                        xlabel={pairs of shoes},ylabel={average cost}]
                                \addplot [red, <->, domain=4285:20000, sample=150] {(30*x+300000)/x};
                                \addplot [blue, <->, domain=0:20000, sample=150] {50};
                                \addplot [soliddot, color=red, above] coordinates {(15000,50)} node{$(15000,50)$};
                            \end{axis}
                        \end{tikzpicture}
                        ]]>
                        </latex-image-code>
                    </image>
                </figure>

                <p>The intersection <m>(15000,50)</m> implies the average cost of producing one pair is <m>\$50.00</m> if the company produces <m>15,000</m> pairs of shoes.</p>

                <p>3. Assume the company's shoes are very popular. What's the average cost of producing infinitely many pairs of shoes?</p>

                <p>To answer this question, we substitute <m>x</m> with some big numbers, and we have:<ul>
                    <li><p><m>(100000, 33),</m></p></li>
                    <li><p><m>(1000000, 31),</m></p></li>
                    <li><p><m>(10000000,30.03),</m></p></li>
                    <li><p><m>(100000000,30.003)</m></p></li>
                </ul>We can guess that the average cost of producing one pair is getting closer and closer to <m>\$30.00</m> as the company produces more and more pairs.</p>

                <p>Note that the cost of producing each pair is <m>\$30.00</m>. This implies, for big companies whose products are very popular, the cost of operations can be ignored when calculating the average cost of producing each unit of product.</p>
            </solution>
        </example>

    </subsection>

    <exercises>
         <exercisegroup>
            <introduction>
                <p>Rational Functions Exercises</p>
            </introduction>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionDefinition10.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionAsymptote10.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionAsymptote20.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionAsymptote30.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionAsymptote40.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionDomain10.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionDomain20.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionDomain30.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionDomain40.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionDomain50.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/FunctionBasics/FunctionDomainRangeByGraph50.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/FunctionBasics/FunctionDomainRangeByGraph60.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionApplication10.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionApplication20.pg" />
            </exercise>
            <exercise>
                <webwork source="BasicAlgebra/RationalFunctions/rationalFunctionGraph10.pg" />
            </exercise>
        </exercisegroup>
         <exercisegroup>
            <introduction>
                <p>Graphing Technology Exercises</p>
            </introduction>
            <exercise>
              <webwork >
                <pg-macros>
                    <macro-file>PCCgraphMacros.pl</macro-file>
                </pg-macros>
                <setup>
                    <var name="$func">
                      <static>\frac{175t+150}{0.5t+3}</static>
                    </var>
                    <var name="$t1">
                      <static>10</static>
                    </var>
                    <var name="$f1">
                      <static>237.5</static>
                    </var>
                    <var name="$f1R">
                      <static>238</static>
                    </var>
                    <var name="$alt">
                      <static>\text{This picture shows the graph of a rational function }f(t)=\frac{175t+150}{0.5t+3}\text{. The point }($t1,$f1)\text{ is labeled.}</static>
                    </var>
                    <pg-code>
                        TEXT(beginproblem());
                        $refreshCachedImages=1;
                        Context("Numeric");
                        Context()->variables->add(t => 'Real');
                        Context()->flags->set(showExtraParens=>0, reduceConstants=>0);
                        Context()->noreduce("(-x)-y","(-x)+y");

                        $init = random(30,100,10);
                        $b2 = random(2,9,1);
                        $b1 = $init*$b2;
                        $horizontal = random(200,500,50);
                        $m2 = random(0.1,0.9,0.1);
                        $m1 = $horizontal*$m2;

                        $func = Compute("($m1*t+$b1)/($m2*t+$b2)")->reduce;
                        $funcX = Compute("($m1*x+$b1)/($m2*x+$b2)")->reduce;

                        $t1 = random(10,30,5);
                        $f1 = $func->eval(t=>$t1);
                        $f1R = int($f1+0.5);

                        $alt="This picture shows the graph of a rational function f(t)=$func. The point ($t1,$f1) is labeled.";

                        ($min[0], $max[0], $min[1], $max[1], $ticknum[0], $ticknum[1], $xticks_ref, $yticks_ref, $marksep[0], $marksep[1]) = NiceGraphParameters([0,$t1],[$f1,0]);

                        @xticks = @$xticks_ref;
                        @yticks = @$yticks_ref;

                        $gr = init_graph($min[0],$min[1],$max[0],$max[1],
                           axes=>[0,0],
                           grid=>[$ticknum[0],$ticknum[1]],
                           size=>[xPixels(),yPixels()]
                        );
                        $gr->lb('reset');
                        for my $j (@xticks) {
                            if (abs($j) &lt; 10**(-10)) {next;}
                            $gr->lb( new Label($j, -$marksep[1]/8, $j,'black','center','top'));
                        }
                        $gr->lb( new Label($max[0]-$marksep[0]/2, $marksep[1]/8, t,'black','center','bottom'));
                        $gr->lb( new Label($marksep[0]/8, $max[1]-$marksep[1]/2, f,'black','left','middle'));

                        for my $j (@yticks) {
                            if (Real($j) == 0) {next;}
                            $gr->lb( new Label(-$marksep[0]/8, $j, $j,'black','right','middle'));
                        }

                        add_functions($gr, "$funcX for x in &lt; 0,$max[0]> using color:red and weight:1");

                        $hx = $t1/2;
                        $hy = $func->eval(t=>$hx);
                        $gr->lb( new Label($hx-$marksep[0]/8, $hy, "f(t)",'red','right','middle'));

                        $gr->stamps( closed_circle($t1,$f1,'red') );
                        $gr->lb( new Label($t1-$marksep[0]/8, $f1+$marksep[1]/8, "($t1,$f1)",'red','right','bottom'));
                    </pg-code>
                </setup>
                <statement>
                    <p>In a forest, the number of deer can be modeled by the function <m>f(x)=<var name="$func"/></m>, where <m>t</m> stands for the number of years from now. Answer the question with technology. Round your answer to a whole number.</p>

                    <p>After <var name="$t1"/> years, there would be approximately <var name="$f1R" width="10" /> deer living in the forest.</p>
                </statement>
                <solution>
                    <p>Use technology to graph the function <m>f(t)=<var name="$func"/></m>.</p>
                    <figure>
                      <image pg-name="$gr">
                          <description><var name="$alt" /></description>
                      </image>
                    </figure>
                    <p>Locate the point whose <m>x</m>-value is <m><var name="$t1"/></m>, which is <m>(<var name="$t1"/>,<var name="$f1"/>)</m>. This point implies there will be approximately <m><var name="$f1R"/></m> deer living in the forest after <m><var name="$t1"/></m> years.</p>
                </solution>
              </webwork>
            </exercise>

            <exercise>
              <webwork >
                <pg-macros>
                    <macro-file>PCCgraphMacros.pl</macro-file>
                </pg-macros>
                <setup>
                    <var name="$func">
                      <static>\frac{175t+150}{0.5t+3}</static>
                    </var>
                    <var name="$t1">
                      <static>6</static>
                    </var>
                    <var name="$f1">
                      <static>200</static>
                    </var>
                    <var name="$t1R">
                      <static>6</static>
                    </var>
                    <var name="$alt">
                      <static>\text{This picture shows the graph of a rational function }f(t)=\frac{175t+150}{0.5t+3}\text{ and a horizontal line }y=$f1\text{. The point }($t1,$f1)\text{ is labeled.}</static>
                    </var>
                    <pg-code>
                        TEXT(beginproblem());
                        $refreshCachedImages=1;
                        Context("Numeric");
                        Context()->variables->add(t => 'Real');
                        Context()->flags->set(showExtraParens=>0, reduceConstants=>0);
                        Context()->noreduce("(-x)-y","(-x)+y");
                        Context()->flags->set(
                          tolerance => 0.05,
                          tolType => "absolute",
                        );
                    
                        $init = random(30,100,10);
                        $b2 = random(2,9,1);
                        $b1 = $init*$b2;
                        $horizontal = random(200,500,50);
                        $m2 = random(0.1,0.9,0.1);
                        $m1 = $horizontal*$m2;

                        $func = Compute("($m1*t+$b1)/($m2*t+$b2)")->reduce;
                        $funcX = Compute("($m1*x+$b1)/($m2*x+$b2)")->reduce;

                        $f1 = random($init+50,$horizontal-50,10);
                        $t1 = ($b1-$f1*$b2)/($f1*$m2-$m1);
                        $t1R = int($t1*10+0.5)/10;

                        $alt="This picture shows the graph of a rational function f(t)=$func and a horizontal line y=$f1. The point ($t1R,$f1) is labeled.";

                        ($min[0], $max[0], $min[1], $max[1], $ticknum[0], $ticknum[1], $xticks_ref, $yticks_ref, $marksep[0], $marksep[1]) = NiceGraphParameters([0,$t1],[$f1,0]);

                        @xticks = @$xticks_ref;
                        @yticks = @$yticks_ref;

                        $gr = init_graph($min[0],$min[1],$max[0],$max[1],
                           axes=>[0,0],
                           grid=>[$ticknum[0],$ticknum[1]],
                           size=>[xPixels(),yPixels()]
                        );
                        $gr->lb('reset');
                        for my $j (@xticks) {
                            if (abs($j) &lt; 10**(-10)) {next;}
                            $gr->lb( new Label($j, -$marksep[1]/8, $j,'black','center','top'));
                        }
                        $gr->lb( new Label($max[0]-$marksep[0]/2, $marksep[1]/8, t,'black','center','bottom'));
                        $gr->lb( new Label($marksep[0]/8, $max[1]-$marksep[1]/2, f,'black','left','middle'));

                        for my $j (@yticks) {
                            if (Real($j) == 0) {next;}
                            $gr->lb( new Label(-$marksep[0]/8, $j, $j,'black','right','middle'));
                        }

                        add_functions($gr, "$funcX for x in &lt; 0,$max[0]> using color:red and weight:1");
                        add_functions($gr, "$f1 for x in &lt; 0,$max[0]> using color:blue and weight:1");
                        $gr->lb( new Label($marksep[0]/8, $f1+$marksep[1]/8, "y=$f1",'blue','left','bottom'));

                        $hx = $t1/2;
                        $hy = $func->eval(t=>$hx);
                        $gr->lb( new Label($hx-$marksep[0]/8, $hy, "f(t)",'red','right','middle'));

                        $gr->stamps( closed_circle($t1,$f1,'red') );
                        $gr->lb( new Label($t1-$marksep[0]/8, $f1+$marksep[1]/8, "($t1R,$f1)",'red','right','bottom'));
                    </pg-code>
                </setup>
                <statement>
                    <p>In a forest, the number of deer can be modeled by the function <m>f(x)=<var name="$func"/></m>, where <m>t</m> stands for the number of years from now. Answer the question with technology. Round your answer to one decimal place.</p>

                    <p>After <var name="$t1R" width="10"/> years, there would be approximately <var name="$f1" /> deer living in the forest.</p>
                </statement>
                <solution>
                    <p>Use technology to graph the function <m>f(t)=<var name="$func"/></m>.</p>
                    <figure>
                      <image pg-name="$gr">
                          <description><var name="$alt" /></description>
                      </image>
                    </figure>
                    <p>To locate the point whose <m>y</m>-value is <m><var name="$f1"/></m>, we graph a second function <m>y=<var name="$f1"/></m>. They have an intersection <m>(<var name="$t1R"/>,<var name="$f1"/>)</m>. This point implies there will be approximately <m><var name="$f1"/></m> deer living in the forest after <m><var name="$t1R"/></m> years.</p>
                </solution>
              </webwork>
            </exercise>

            <exercise>
              <webwork >
                <setup>
                    <var name="$func">
                      <static>\frac{175t+150}{0.5t+3}</static>
                    </var>
                    <var name="$t1">
                      <static>100</static>
                    </var>
                    <var name="$f1">
                      <static>333.0\ldots</static>
                    </var>
                    <var name="$t2">
                      <static>1000</static>
                    </var>
                    <var name="$f2">
                      <static>348.2\ldots</static>
                    </var>
                    <var name="$t3">
                      <static>10000</static>
                    </var>
                    <var name="$f3">
                      <static>349.8\ldots</static>
                    </var>
                    <var name="$t4">
                      <static>100000</static>
                    </var>
                    <var name="$f4">
                      <static>349.9\ldots</static>
                    </var>
                    <var name="$horizontal">
                      <static>350</static>
                    </var>
                    <pg-code>
                        TEXT(beginproblem());
                        Context("Numeric");
                        Context()->variables->add(t => 'Real');
                        Context()->noreduce("(-x)-y","(-x)+y");
                    
                        $init = random(30,100,10);
                        $b2 = random(2,9,1);
                        $b1 = $init*$b2;
                        $horizontal = random(200,500,50);
                        $m2 = random(0.1,0.9,0.1);
                        $m1 = $horizontal*$m2;

                        $func = Compute("($m1*t+$b1)/($m2*t+$b2)")->reduce;

                        $t1 = 100;
                        $f1 = $func->eval(t=>$t1);
                        $f1R = int($f1+0.5);

                        $t2 = 1000;
                        $f2 = $func->eval(t=>$t2);
                        $f2R = int($f2+0.5);

                        $t3 = 10000;
                        $f3 = $func->eval(t=>$t3);
                        $f3R = int($f3+0.5);

                        $t4 = 100000;
                        $f4 = $func->eval(t=>$t4);
                        $f4R = int($f4+0.5);
                    </pg-code>
                </setup>
                <statement>
                    <p>In a forest, the number of deer can be modeled by the function <m>f(x)=<var name="$func"/></m>, where <m>t</m> stands for the number of years from now. Answer the question with technology. Round your answer to one decimal place.</p>

                    <p>In the long run, there would be approximately <var name="$horizontal" width="10"/> deer living in the forest.</p>
                </statement>
                <solution>
                    <p>With technology, we can find <m>y</m>-values of a few points when <m>x</m>-values are very large. For example:
                        <ul>
                            <li><p><m>(<var name="$t1"/>,<var name="$f1"/>)</m></p></li>
                            <li><p><m>(<var name="$t2"/>,<var name="$f2"/>)</m></p></li>
                            <li><p><m>(<var name="$t3"/>,<var name="$f3"/>)</m></p></li>
                            <li><p><m>(<var name="$t4"/>,<var name="$f4"/>)</m></p></li>
                        </ul>We can see the number of deer living in the forest is approaching <m><var name="$horizontal"/></m>.</p>
                </solution>
              </webwork>
            </exercise>

            <exercise>
              <webwork >
                <pg-macros>
                    <macro-file>PCCgraphMacros.pl</macro-file>
                </pg-macros>
                <setup>
                    <var name="$func">
                      <static>\frac{3t}{t^2+5}</static>
                    </var>
                    <var name="$t1">
                      <static>5</static>
                    </var>
                    <var name="$f1">
                      <static>0.5</static>
                    </var>
                    <var name="$f1R">
                      <static>0.5</static>
                    </var>
                    <var name="$alt">
                      <static>\text{This picture shows the graph of a rational function }C(t)=\frac{3t}{t^2+5}\text{. The point }($t1,$f1R)\text{ is labeled.}</static>
                    </var>
                    <pg-code>
                        TEXT(beginproblem());
                        $refreshCachedImages=1;
                        Context("Numeric");
                        Context()->variables->add(t => 'Real');
                        Context()->flags->set(showExtraParens=>0, reduceConstants=>0);
                        Context()->noreduce("(-x)-y","(-x)+y");
                        Context()->flags->set(
                          tolerance => 0.005,
                          tolType => "absolute",
                        );
                    
                        $a = random(2,9,1);
                        do {$b = random(2,9,1);} until ($a!=$b);

                        $func = Compute("($a*t)/(t**2+$b)")->reduce;
                        $funcX = Compute("($a*x)/(x**2+$b)")->reduce;

                        $t1 = random(1,9,1);
                        $f1 = $func->eval(t=>$t1);
                        $f1R = int($f1*100+0.5)/100;

                        $alt="This picture shows the graph of a rational function C(t)=$func. The point ($t1,$f1R) is labeled.";

                        ($min[0], $max[0], $min[1], $max[1], $ticknum[0], $ticknum[1], $xticks_ref, $yticks_ref, $marksep[0], $marksep[1]) = NiceGraphParameters([0,$t1],[$f1,0]);

                        @xticks = @$xticks_ref;
                        @yticks = @$yticks_ref;

                        $gr = init_graph($min[0],$min[1],$max[0],$max[1],
                           axes=>[0,0],
                           grid=>[$ticknum[0],$ticknum[1]],
                           size=>[xPixels(),yPixels()]
                        );
                        $gr->lb('reset');
                        for my $j (@xticks) {
                            if (abs($j) &lt; 10**(-10)) {next;}
                            $gr->lb( new Label($j, -$marksep[1]/8, $j,'black','center','top'));
                        }
                        $gr->lb( new Label($max[0]-$marksep[0]/2, $marksep[1]/8, t,'black','center','bottom'));
                        $gr->lb( new Label($marksep[0]/8, $max[1]-$marksep[1]/2, C,'black','left','middle'));

                        for my $j (@yticks) {
                            if (Real($j) == 0) {next;}
                            $gr->lb( new Label(-$marksep[0]/8, $j, $j,'black','right','middle'));
                        }

                        add_functions($gr, "$funcX for x in &lt; 0,$max[0]> using color:red and weight:1");

                        $hx = $t1/2;
                        $hy = $func->eval(t=>$hx);
                        $gr->lb( new Label($hx-$marksep[0]/8, $hy, "C(t)",'red','right','middle'));

                        $gr->stamps( closed_circle($t1,$f1,'red') );
                        $gr->lb( new Label($t1-$marksep[0]/8, $f1+$marksep[1]/8, "($t1,$f1R)",'red','right','bottom'));
                    </pg-code>
                </setup>
                <statement>
                    <p>The concentration of a drug in a patient's blood stream, in milligrams per liter, can be modeled by the function <m>C(t)=<var name="$func"/></m>, where <m>t</m> is the number of hours since the drug is injected. Answer the following question with technology. Round your answer to two decimal places if needed.</p>

                    <p>The drug's concentration after <var name="$t1" /> hours is <var name="$f1R" width="10"/> milligrams per liter.</p>
                </statement>
                <solution>
                    <p>Use technology to graph the function <m>C(t)=<var name="$func"/></m>.</p>
                    <figure>
                      <image pg-name="$gr">
                          <description><var name="$alt" /></description>
                      </image>
                    </figure>
                    <p>Locate the point whose <m>x</m>-value is <m><var name="$t1"/></m>, which is <m>(<var name="$t1"/>,<var name="$f1R"/>)</m>. This point implies the drug's concentration will be approximately <m><var name="$f1R"/></m> milligrams per liter <m><var name="$t1"/></m> hours since injection.</p>
                </solution>
              </webwork>
            </exercise>

            <exercise>
              <webwork >
                <pg-macros>
                    <macro-file>PCCgraphMacros.pl</macro-file>
                </pg-macros>
                <setup>
                    <var name="$func">
                      <static>\frac{3t}{t^2+5}</static>
                    </var>
                    <var name="$t1R">
                      <static>0.74</static>
                    </var>
                    <var name="$f1R">
                      <static>0.4</static>
                    </var>
                    <var name="$t2R">
                      <static>6.76</static>
                    </var>
                    <var name="$ans">
                      <static>0.74,6.76</static>
                    </var>
                    <var name="$alt">
                      <static>\text{This picture shows the graph of a rational function }C(t)=\frac{3t}{t^2+5}\text{ and the line }y=$f1R\text{. Their intersections }($t1R,$f1R)\text{ and }($t2R,$f1R)\text{ are labeled.}</static>
                    </var>
                    <pg-code>
                        TEXT(beginproblem());
                        $refreshCachedImages=1;
                        Context("Numeric");
                        Context()->variables->add(t => 'Real');
                        Context()->flags->set(showExtraParens=>0, reduceConstants=>0);
                        Context()->noreduce("(-x)-y","(-x)+y");
                        Context()->flags->set(
                          tolerance => 0.005,
                          tolType => "absolute",
                        );
                    
                        $a = random(2,9,1);
                        do {$b = random(4,9,1);} until ($a!=$b);

                        $func = Compute("($a*t)/(t**2+$b)")->reduce;
                        $funcX = Compute("($a*x)/(x**2+$b)")->reduce;

                        $tMax = sqrt($b);
                        $fMax = $func->eval(t=>$tMax);
                        $t11 = random(5,int($tMax*10)-5,1)/10;
                        $f11 = $func->eval(t=>$t11);
                        $f11R = int($f11*100+0.5)/100;

                        $a1 = $f11R;
                        $b1 = -$a;
                        $c1 = $b*$f11R;
                        $dis = ($b1)**2-4*$a1*$c1;
                        $t1 = (-$b1-sqrt($dis))/(2*$a1);
                        $t2 = (-$b1+sqrt($dis))/(2*$a1);
                        $t1R = int($t1*100+0.5)/100;
                        $t2R = int($t2*100+0.5)/100;
                        $f1 = $func->eval(t=>$t1);
                        $f1R = int($f1*100+0.5)/100;
                        $ans = List($t1R,$t2R);

                        $alt="This picture shows the graph of a rational function C(t)=$func and the line y=$f1. Their intersections ($t1R,$f1R) and ($t2R,$f1R) are labeled.";

                        ($min[0], $max[0], $min[1], $max[1], $ticknum[0], $ticknum[1], $xticks_ref, $yticks_ref, $marksep[0], $marksep[1]) = NiceGraphParameters([0,$t2],[$fMax,0,0.5]);

                        @xticks = @$xticks_ref;
                        @yticks = @$yticks_ref;

                        $gr = init_graph($min[0],$min[1],$max[0],$max[1],
                           axes=>[0,0],
                           grid=>[$ticknum[0],$ticknum[1]],
                           size=>[xPixels(),yPixels()]
                        );
                        $gr->lb('reset');
                        for my $j (@xticks) {
                            if (abs($j) &lt; 10**(-10)) {next;}
                            $gr->lb( new Label($j, -$marksep[1]/8, $j,'black','center','top'));
                        }
                        $gr->lb( new Label($max[0]-$marksep[0]/2, $marksep[1]/8, t,'black','center','bottom'));
                        $gr->lb( new Label($marksep[0]/8, $max[1]-$marksep[1]/2, C,'black','left','middle'));

                        for my $j (@yticks) {
                            if (Real($j) == 0) {next;}
                            $gr->lb( new Label(-$marksep[0]/8, $j, $j,'black','right','middle'));
                        }

                        add_functions($gr, "$funcX for x in &lt; 0,$max[0]> using color:red and weight:1");
                        add_functions($gr, "$f1R for x in &lt; 0,$max[0]> using color:red and weight:1");
                        $gr->lb( new Label($tMax, $f1R-$marksep[1]/8, "y=$f1R",'red','center','top'));

                        $hx = $tMax;
                        $hy = $func->eval(t=>$tMax);
                        $gr->lb( new Label($hx, $hy+$marksep[1]/8, "C(t)",'red','center','bottom'));

                        $gr->stamps( closed_circle($t1,$f1,'red') );
                        $gr->stamps( closed_circle($t2,$f1,'red') );
                        $gr->lb( new Label($t1-$marksep[0]/8, $f1+$marksep[1]/8, "($t1R,$f1R)",'red','center','bottom'));
                        $gr->lb( new Label($t2-$marksep[0]/8, $f1+$marksep[1]/8, "($t2R,$f1R)",'red','center','bottom'));
                    </pg-code>
                </setup>
                <statement>
                    <p>The concentration of a drug in a patient's blood stream, in milligrams per liter, can be modeled by the function <m>C(t)=<var name="$func"/></m>, where <m>t</m> is the number of hours since the drug is injected. Answer the following question with technology. Round your answer to two decimal places if needed. If there are more than one answer, use commas to separate them.</p>

                    <p><var name="$ans" width="10"/> hours since injection, the drug's concentration is <var name="$f1R" /> milligrams per liter.</p>
                </statement>
                <solution>
                    <p>To locate the points on <m>C(t)</m> where the <m>y</m>-value is <m><var name="$f1R"/></m>, we use technology to graph the function <m>C(t)=<var name="$func"/></m> and <m>y=<var name="$f1R"/></m>, and then locate their intersections.</p>
                    <figure>
                      <image pg-name="$gr">
                          <description><var name="$alt" /></description>
                      </image>
                    </figure>
                    <p>The intersections are <m>(<var name="$t1R"/>,<var name="$f1R"/>)</m> and <m>(<var name="$t2R"/>,<var name="$f1R"/>)</m>. Those points imply the drug concentration in the blood stream will be approximately <m><var name="$f1R"/></m> milligrams per liter approximately <m><var name="$t1R"/></m> hours since injection, and then again at this level <m><var name="$t2R"/></m> hours since the injection.</p>
                </solution>
              </webwork>
            </exercise>

            <exercise>
              <webwork >
                <pg-macros>
                    <macro-file>PCCgraphMacros.pl</macro-file>
                </pg-macros>
                <setup>
                    <var name="$func">
                      <static>\frac{3t}{t^2+5}</static>
                    </var>
                    <var name="$tMaxR">
                      <static>2.24</static>
                    </var>
                    <var name="$fMaxR">
                      <static>0.67</static>
                    </var>
                    <var name="$alt">
                      <static>\text{This picture shows the graph of a rational function }C(t)=\frac{3t}{t^2+5}\text{. The point with the maximum }y\text{-value, }($tMaxR,$fMaxR)\text{, is labeled.}</static>
                    </var>
                    <pg-code>
                        TEXT(beginproblem());
                        $refreshCachedImages=1;
                        Context("Numeric");
                        Context()->variables->add(t => 'Real');
                        Context()->flags->set(showExtraParens=>0, reduceConstants=>0);
                        Context()->noreduce("(-x)-y","(-x)+y");
                        Context()->flags->set(
                          tolerance => 0.005,
                          tolType => "absolute",
                        );
                    
                        $a = random(2,9,1);
                        do {$b = random(4,9,1);} until ($a!=$b);

                        $func = Compute("($a*t)/(t**2+$b)")->reduce;
                        $funcX = Compute("($a*x)/(x**2+$b)")->reduce;

                        $tMax = sqrt($b);
                        $fMax = $func->eval(t=>$tMax);
                        $tMaxR = int($tMax*100+0.5)/100;
                        $fMaxR = int($fMax*100+0.5)/100;

                        $alt="This picture shows the graph of a rational function C(t)=$func. The point with the maximum y-value, ($tMax,$fMax), is labeled.";

                        ($min[0], $max[0], $min[1], $max[1], $ticknum[0], $ticknum[1], $xticks_ref, $yticks_ref, $marksep[0], $marksep[1]) = NiceGraphParameters([0,$tMax*2.5],[$fMax,0,0.5]);

                        @xticks = @$xticks_ref;
                        @yticks = @$yticks_ref;

                        $gr = init_graph($min[0],$min[1],$max[0],$max[1],
                           axes=>[0,0],
                           grid=>[$ticknum[0],$ticknum[1]],
                           size=>[xPixels(),yPixels()]
                        );
                        $gr->lb('reset');
                        for my $j (@xticks) {
                            if (abs($j) &lt; 10**(-10)) {next;}
                            $gr->lb( new Label($j, -$marksep[1]/8, $j,'black','center','top'));
                        }
                        $gr->lb( new Label($max[0]-$marksep[0]/2, $marksep[1]/8, t,'black','center','bottom'));
                        $gr->lb( new Label($marksep[0]/8, $max[1]-$marksep[1]/2, C,'black','left','middle'));

                        for my $j (@yticks) {
                            if (Real($j) == 0) {next;}
                            $gr->lb( new Label(-$marksep[0]/8, $j, $j,'black','right','middle'));
                        }

                        add_functions($gr, "$funcX for x in &lt; 0,$max[0]> using color:red and weight:1");

                        $hx = ($tMax+$max[0])/2;
                        $hy = $func->eval(t=>$hx);
                        $gr->lb( new Label($hx-$marksep[0]/8, $hy, "C(t)",'red','right','middle'));

                        $gr->stamps( closed_circle($tMax,$fMax,'red') );
                        $gr->lb( new Label($tMax-$marksep[0]/8, $fMax+$marksep[1]/8, "($tMaxR,$fMaxR)",'red','center','bottom'));
                    </pg-code>
                </setup>
                <statement>
                    <p>The concentration of a drug in a patient's blood stream, in milligrams per liter, can be modeled by the function <m>C(t)=<var name="$func"/></m>, where <m>t</m> is the number of hours since the drug is injected. Answer the following question with technology. Round your answer to two decimal places if needed.</p>

                    <p><var name="$tMaxR" width="10" /> hours since injection, the drug's concentration is at the maximum value of <var name="$fMaxR" width="10"/> milligrams per liter.</p>
                </statement>
                <solution>
                    <p>To locate the points on <m>C(t)</m> where the <m>y</m>-value is maximum, we use technology to graph the function <m>C(t)=<var name="$func"/></m>, and then locate its maximum value.</p>
                    <figure>
                      <image pg-name="$gr">
                          <description><var name="$alt" /></description>
                      </image>
                    </figure>
                    <p>The point with the maximum <m>y</m>-value is <m>(<var name="$tMaxR"/>,<var name="$fMaxR"/>)</m>. It implies the drug concentration in the blood stream will reach the maximum value of <m><var name="$fMaxR"/></m> milligrams per liter approximately <m><var name="$tMaxR"/></m> hours since injection.</p>
                </solution>
              </webwork>
            </exercise>

            <exercise>
              <webwork >
                <pg-macros>
                    <macro-file>PCCgraphMacros.pl</macro-file>
                </pg-macros>
                <setup>
                    <var name="$func">
                      <static>\frac{3t}{t^2+5}</static>
                    </var>
                    <var name="$t1">
                      <static>10</static>
                    </var>
                    <var name="$f1R">
                      <static>0.2857\ldots</static>
                    </var>
                    <var name="$t2">
                      <static>100</static>
                    </var>
                    <var name="$f2R">
                      <static>0.02999\ldots</static>
                    </var>
                    <var name="$t3">
                      <static>1000</static>
                    </var>
                    <var name="$f3R">
                      <static>0.002999\ldots</static>
                    </var>
                    <var name="$horizontal">
                      <static>0</static>
                    </var>
                    <pg-code>
                        TEXT(beginproblem());
                        $refreshCachedImages=1;
                        Context("Numeric");
                        Context()->variables->add(t => 'Real');
                        Context()->flags->set(showExtraParens=>0, reduceConstants=>0);
                        Context()->noreduce("(-x)-y","(-x)+y");
                    
                        $a = random(4,9,1);
                        do {$b = random(4,9,1);} until ($a!=$b);

                        $func = Compute("($a*t)/(t**2+$b)")->reduce;
                        $funcX = Compute("($a*x)/(x**2+$b)")->reduce;

                        $t1 = 10;
                        $f1 = $func->eval(t=>$t1);
                        $f1R = int($f1*100+0.5)/100;

                        $t2 = 100;
                        $f2 = $func->eval(t=>$t2);
                        $f2R = int($f2*100+0.5)/100;

                        $t3 = 1000;
                        $f3 = $func->eval(t=>$t3);
                        $f3R = int($f3*100+0.5)/100;

                        $horizontal = 0;
                    </pg-code>
                </setup>
                <statement>
                    <p>The concentration of a drug in a patient's blood stream, in milligrams per liter, can be modeled by the function <m>C(t)=<var name="$func"/></m>, where <m>t</m> is the number of hours since the drug is injected. Answer the following question with technology. Round your answer to two decimal places if needed.</p>

                    <p>In the long run, the drug's concentration in the patient's blood stream is <var name="$horizontal" width="10"/> milligrams per liter.</p>
                </statement>
                <solution>
                    <p>With technology, we can find <m>y</m>-values of a few points when <m>x</m>-values are very large. For example:
                        <ul>
                            <li><p><m>(<var name="$t1"/>,<var name="$f1R"/>)</m></p></li>
                            <li><p><m>(<var name="$t2"/>,<var name="$f2R"/>)</m></p></li>
                            <li><p><m>(<var name="$t3"/>,<var name="$f3R"/>)</m></p></li>
                        </ul>We can see the concentration is approaching <m><var name="$horizontal"/></m>. This makes sense since the drug will eventually disappear from the patient's body.</p>
                </solution>
              </webwork>
            </exercise>

        </exercisegroup>
    </exercises>

</section>
